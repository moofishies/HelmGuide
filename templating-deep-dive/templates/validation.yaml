{{- if and .Values.securityContext .Values.securityContext.enabled -}}
{{- $_ := required "securityContext.runasUser is required when setting securityContext and enabled is true" .Values.securityContext.runAsUser -}}
{{- $_ := required "securityContext.fsGroup is required when setting securityContext and enabled is true" .Values.securityContext.fsGroup -}}
{{- if int .Values.securityContext.runAsUser | eq 0 -}}
{{- fail "Invalid value for :securityContext.runAsUser.\n\nContainers cannot be run as root.\nPlease provide a uid greater than 0" -}}
{{- end -}}
{{- end -}}